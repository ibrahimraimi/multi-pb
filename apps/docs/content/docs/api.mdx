---
title: API Reference
description: Complete API documentation for Multi-PB
---

The internal API server runs on port 3001 inside the container but is exposed via Caddy at `/api`.

Base URL: `http://localhost:25983/api`

## Authorization

API authorization is **optional** and can be enabled by configuring an admin token.

### Enabling Authorization

Set an admin token using either:

1. **Environment Variable**: `MULTIPB_ADMIN_TOKEN=your-secret-token`
2. **Config File**: Add `"adminToken": "your-secret-token"` to `/var/multipb/data/config.json`

When a token is configured, all write operations (POST, PUT, DELETE) require the token in the `Authorization` header:

```bash
curl -X POST http://localhost:25983/api/instances \
  -H "Authorization: Bearer your-secret-token" \
  -H "Content-Type: application/json" \
  -d '{"name": "myapp"}'
```

**Note**: Read-only operations (GET requests) do not require authorization, even when a token is configured.

### Security Best Practices

- Use a strong, randomly generated token (e.g., 32+ characters)
- Keep the token secret and never commit it to version control
- When authorization is not configured, the API is open to all requests - ensure proper network security

## Instances

### List Instances

`GET /instances`
Returns a list of all configured instances.

### Create Instance

`POST /instances`

```json
{
  "name": "myapp",
  "email": "admin@example.com",
  "password": "secret",
  "memory": "512MB"
}
```

### Get Instance Details

`GET /instances/:name`
Returns details, status, backup list, and **health history**.

### Control Instance

`POST /instances/:name/start`
`POST /instances/:name/stop`
`POST /instances/:name/restart`

## Import

### Import from ZIP

`POST /import?name=new-name`
Body: Binary content of the ZIP file.

## Backups

### Create Backup

`POST /instances/:name/backups`

### Restore Backup

`POST /instances/:name/backups/:filename/restore`

### Download Backup

`GET /instances/:name/backups/:filename/download`

## Monitoring

### Health History

`GET /instances/:name/history`
Returns historical health check data.

### Notification Config

`GET /notifications/config`
Returns current public notification settings (e.g. configured webhook URL).

## System & Ports

### Check Port Availability

`GET /ports/check/:port`
Checks if a port is available and within the allowed range (30000-39999).

### List Used Ports

`GET /ports/used`
Returns a list of all ports currently assigned to instances.

### System Stats

`GET /stats`
Returns container CPU load, memory usage, and disk usage.
